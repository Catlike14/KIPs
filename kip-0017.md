---
KIP: 0017
Title: wallet-connect-v2-sign implementation spec
Author: Jacquin Mininger @jmininger, Doug Beardsley @mightybyte
Status: Draft
Type: Standard
Category: Interface
Created: 2022-11-15
---

# Abstract

We propose that the Kadena ecosystem use the [wallet-connect-v2 sign-api](https://docs.walletconnect.com/2.0/introduction/sign) to establish a secure channel for communication between dapps and wallets that is platform-agnostic.

# Motivation

- The prior signing-api requires the wallet to be able to run a http server. This is often times not possible for browser-based and mobile wallets
- The protocol is a tried and tested way of abstracting the communication between dapps and wallets across all devices, and removes the burden of having to maintain a kadena-specific implementation
- Wallet connect will allow multi-protocol wallets/dapps that are already using the protocol to seamlessly integrate with the kadena ecosystem

# Specification

## Namespace

- Namespaces are a way of identifying blockchain ecosystems in the wallet-connect protocol.
- In WC namespaces must abide by the [CAIP-2 standard](https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-2.md) which imposes the following pattern-based restriction: `[-a-z0-9]{3,8}`
- The namespace for kadena is `kadena`

## Chain ID

- Chain IDs are wallet-connect’s way of identifying specific blockchains within an ecosystem. They are defined by the [CAIP-2 standard](https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-2.md), and are formatted as `namespace + ":" + reference`
- A reference refers to a specific network-id within the kadena ecosystem
- **NOTE**: Chain IDs in the wallet protocol ARE NOT the same as chainweb/pact’s version of “chain-id” — they are much more similar to `networkId`

These are valid kadena chain-ids

```
# Kadena mainnet
kadena:mainnet01

# Current kadena testnet
kadena:testnet04

# Kadena devnet
kadena:development
```

## Accounts

- Accounts in wallet connect are used to specify control over signing privileges
- They must conform to [CAIP-10](https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-10.md) and are formatted: `chain_id + ":" + account_address`
- **NOTE**: Wallet-connect’s `account_address` is NOT the same as pact’s coin account. Instead, they are analogous to pact’s `signer` ([see here](https://api.chainweb.com/openapi/pact.html#tag/model-payload))

Here are some example accounts:

```

kadena:mainnet01:22ddc64851718e9d41d98b0f33d5e328ae5bbbbd97aed9885adac0f2d070ff9c

kadena:testnet04:38298612cc2d5e841a232bd08413aa5304f9ef3251575ee182345abc3807dd89
```

## Default Methods

- The supported methods are:

```
kadena_sign_v1
kadena_quicksign_v1
```

- The params can be found in the [kadena-signing-api](https://kadena-io.github.io/signing-api/). Future methods may be added and will be documented there

## Events

- At the moment we see no need to standardize any events and believe that most usecases can be handled at the kadena-protocol level that sits atop wallet connect. This is subject to change in the future as we understand the workflows more through extended use of the protocol

## SLIP-0044
While not required in the namespace proposal process, a network's SLIP-0044 value is used throughout the wallet connect demo code.
Kadena's coin type is 626 as documented in https://github.com/satoshilabs/slips/blob/master/slip-0044.md

# Example Proposal and Response

```json
# Proposal namespace request
{
  "kadena": {
    "chains": ["kadena:mainnet01", "kadena:testnet04", "kadena:development"],
    "methods": ["kadena_quicksign_v1"],
    "events": []
  }
}
```

```json
# Session namespace response
{
  "kadena": {
    "accounts": [
      "kadena:mainnet01:38298612cc2d5e841a232bd08413aa5304f9ef3251575ee182345abc3807dd89",
      "kadena:testnet04:38298612cc2d5e841a232bd08413aa5304f9ef3251575ee182345abc3807dd89",
      "kadena:testnet04:22ddc64851718e9d41d98b0f33d5e328ae5bbbbd97aed9885adac0f2d070ff9c"
    ],
    "methods": ["kadena_quicksign_v1"],
    "events": []
    }
}
```

# ****Backwards Compatibility****

- As we work on phasing out the tradition signing-api exposed on localhost port 9467 we suggest dapps allow users to select between a legacy and wallet-connect option when connecting their wallet
